<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kiosk Controller</title>

<style>
html, body {
  margin: 0;
  height: 100%;
  width: 100%;
  overflow: hidden;
  background: #000;
}

/* onzichtbare kliklaag voor starten */
#startLayer {
  position: fixed;
  inset: 0;
  z-index: 99999;
  background: rgba(0,0,0,0);
  touch-action: manipulation;
}
</style>
</head>

<body>

<div id="startLayer"></div>

<script>
const LOOP_URL = "https://play.loopsign.eu/app/4146/313638";
const WEB_URL  = "https://sb.geboortelijst.be";
const TIMEOUT  = 60 * 1000;

let inactivityTimer;

// Start met LoopSign
if (!sessionStorage.getItem("mode")) {
  sessionStorage.setItem("mode", "loop");
  window.location.href = LOOP_URL;
}

// Wanneer terugkomt van website
if (window.location.href.includes("sb.geboortelijst")) {
  sessionStorage.setItem("mode", "web");
}

// Start website bij klik
document.getElementById("startLayer")?.addEventListener("pointerup", () => {
  sessionStorage.setItem("mode", "web");
  window.location.href = WEB_URL;
});

// Inactivity detectie
function resetTimer() {
  clearTimeout(inactivityTimer);
  inactivityTimer = setTimeout(() => {
    sessionStorage.setItem("mode", "loop");
    window.location.href = LOOP_URL;
  }, TIMEOUT);
}

["mousemove","keydown","scroll","touchstart","click"].forEach(evt => {
  document.addEventListener(evt, resetTimer, true);
});

resetTimer();
</script>

</body>
</html>
