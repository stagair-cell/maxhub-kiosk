<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kiosk Controller</title>

<style>
html,body{
    margin:0;
    height:100%;
    width:100%;
    overflow:hidden;
}

iframe{
    position:absolute;
    inset:0;
    width:100%;
    height:100%;
    border:none;
}
</style>
</head>

<body>

<iframe id="frame"></iframe>

<script>

const INTERACTIVE_URL = "https://example.com"; 
const LOOP_URL = "https://play.loopsign.eu/app/4146/313638";

const IDLE_TIME = 60000; // 60 sec

let lastActivity = Date.now();
let currentMode = "interactive";

const frame = document.getElementById("frame");
frame.src = INTERACTIVE_URL;

function resetTimer(){
    lastActivity = Date.now();

    if(currentMode === "loop"){
        frame.src = INTERACTIVE_URL;
        currentMode = "interactive";
    }
}

document.addEventListener("touchstart", resetTimer);
document.addEventListener("mousemove", resetTimer);
document.addEventListener("click", resetTimer);

setInterval(()=>{
    if(Date.now() - lastActivity > IDLE_TIME){
        if(currentMode === "interactive"){
            frame.src = LOOP_URL;
            currentMode = "loop";
        }
    }
}, 2000);

</script>

</body>
</html>
