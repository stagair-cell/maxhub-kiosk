<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  html,body{margin:0;height:100%;width:100%;overflow:hidden;background:#000}
  iframe{position:absolute;inset:0;width:100%;height:100%;border:0}

  /* duidelijke kliklaag (even laten staan voor test) */
  #tapLayer{
    position:absolute; inset:0;
    background:rgba(255,0,0,0.10); /* licht rood zodat je weet dat hij er is */
    z-index:9999;
    touch-action:none;
    -webkit-user-select:none;
    user-select:none;
  }
  #hint{
    position:absolute; left:12px; bottom:12px; z-index:10000;
    padding:8px 10px; border-radius:10px;
    background:rgba(0,0,0,.55); color:#fff;
    font:14px Arial;
    pointer-events:none;
  }
</style>
</head>
<body>

<iframe id="frame"></iframe>
<div id="tapLayer"></div>
<div id="hint">Tik om website te openen</div>

<script>
  const LOOP_URL = "https://play.loopsign.eu/app/4146/313638";
  const WEB_URL  = "https://example.com/";
  const TIMEOUT  = 60000;

  const frame = document.getElementById("frame");
  const tapLayer = document.getElementById("tapLayer");
  const hint = document.getElementById("hint");

  let mode = "loop";
  let timer = null;

  frame.src = LOOP_URL;

  function showLoop(){
    mode = "loop";
    frame.src = LOOP_URL;
    tapLayer.style.display = "block";
    hint.style.display = "block";
    if (timer) { clearTimeout(timer); timer = null; }
  }

  function showWeb(){
    mode = "web";
    frame.src = WEB_URL;
    tapLayer.style.display = "none";   // zodat je kan klikken in de website
    hint.style.display = "none";
    if (timer) clearTimeout(timer);
    timer = setTimeout(showLoop, TIMEOUT);
  }

  function fire(e){
    // super agressief om kiosk-webviews te forceren
    if (e) {
      e.preventDefault?.();
      e.stopPropagation?.();
      e.stopImmediatePropagation?.();
    }
    if (mode === "loop") showWeb();
  }

  // Android kiosk: touchstart is vaak betrouwbaarder dan pointerdown
  tapLayer.addEventListener("touchstart", fire, {capture:true, passive:false});
  tapLayer.addEventListener("touchend", fire, {capture:true, passive:false});
  tapLayer.addEventListener("mousedown", fire, {capture:true, passive:false});
  tapLayer.addEventListener("click", fire, {capture:true, passive:false});
</script>

</body>
</html>
